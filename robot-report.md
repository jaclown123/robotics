# Dofbot机械臂运动学分析实验报告

## 实验目的

1. 掌握机械臂DH参数建模方法
2. 理解和实现机械臂正运动学求解
3. 理解和实现机械臂逆运动学求解
4. 分析机械臂工作空间特性及其可视化方法

## 实验环境

### 软件依赖

- Python 3.12.7
- roboticstoolbox: 机器人工具箱，用于机械臂建模和运动学计算
- numpy: 数值计算库
- matplotlib: 基础绘图库
- plotly: 交互式数据可视化库，用于3D工作空间的动态显示
- scipy: 科学计算库，用于凸包计算
- pandas: 数据处理库

## 实验内容

### 1. DH参数建模

使用改进DH参数法对Dofbot机械臂进行建模。机械臂的结构参数如下：

- l1 = 0.1045m (第一连杆长度)
- l2 = 0.08285m (第三连杆长度)
- l3 = 0.08285m (第四连杆长度)
- l4 = 0.12842m (第五连杆长度)

改进DH参数表：

```
┌─────────┬─────────────────────┬───────────┬─────────┬─────────┬────────┐
│  aⱼ₋₁   │        ⍺ⱼ₋₁         │    θⱼ     │   dⱼ    │   q⁻    │   q⁺   │
├─────────┼─────────────────────┼───────────┼─────────┼─────────┼────────┤
│       0 │                0.0° │        q1 │  0.1045 │ -180.0° │ 180.0° │
│       0 │ -89.99999846476551° │  q2 - 90° │     0.0 │  -90.0° │  90.0° │
│ 0.08285 │                0.0° │        q3 │     0.0 │ -150.0° │ 150.0° │
│ 0.08285 │                0.0° │  q4 + 90° │     0.0 │ -100.0° │ 100.0° │
│     0.0 │  89.99999846476551° │        q5 │ 0.12842 │ -180.0° │ 180.0° │
└─────────┴─────────────────────┴───────────┴─────────┴─────────┴────────┘
```

关键创新点：

1. 引入关节限位参数(qlim)，确保运动规划在安全范围内
2. 采用改进DH参数法而非标准DH参数，提高建模准确性

### 2. 正运动学验证

对以下四组关节角度进行正运动学求解：

1. 关节角度组0(demo): [0., pi/3, pi/4, pi/5, 0.]

```
正运动学结果：
[[-0.7771   -1.686e-08  0.6293    0.2326]   
 [1.686e-08  1         4.762e-08  5.58e-09]  
 [-0.6293    4.762e-08 -0.7771    0.02468]   
 [0         0         0         1]]
```

![**关节角度组0(demo)仿真结果**](./Robotics_Toolbox_for_Python_(Figure_1).png)

2. 关节角度组1: [π/2, π/5, π/5, π/5, π]

```
正运动学结果：
[[ -1.983e-08  1.000e+00 -9.592e-09  4.666e-09]
 [  3.090e-01  1.525e-08  9.511e-01  2.496e-01]
 [  9.511e-01  1.589e-08 -3.090e-01  1.574e-01]
 [  0.000e+00  0.000e+00  0.000e+00  1.000e+00]]
```

![**关节角度组1仿真结果**](./Robotics_Toolbox_for_Python_(Figure_2).png)

3. 关节角度组2: [π/3, π/4, -π/3, -π/4, π/2]

```
正运动学结果：
[[ -8.660e-01 -2.500e-01 -4.330e-01 -3.704e-02]
 [  5.000e-01 -4.330e-01 -7.500e-01 -6.415e-02]
 [  3.660e-08 -8.660e-01  5.000e-01  3.073e-01]
 [  0.000e+00  0.000e+00  0.000e+00  1.000e+00]]
```

![**关节角度组2仿真结果**](./Robotics_Toolbox_for_Python_(Figure_3).png)

4. 关节角度组3: [-π/2, π/3, -2π/3, π/3, π/3]

```
正运动学结果：
[[  8.660e-01  5.000e-01  0.000e+00 -2.220e-09]
 [ -5.000e-01  8.660e-01  0.000e+00 -2.220e-09]
 [  0.000e+00  0.000e+00  1.000e+00  3.158e-01]
 [  0.000e+00  0.000e+00  0.000e+00  1.000e+00]]
```

![**关节角度组3仿真结果**](./Robotics_Toolbox_for_Python_(Figure_4).png)

### 3. 逆运动学验证

使用Levenberg-Marquardt算法实现逆运动学求解。对以下目标位姿进行求解：

1. 目标位姿0:

```python
target_pos0 = np.array([
    [-1., 0., 0., 0.1,],
    [0., 1., 0., 0.],
    [0., 0., -1., -0.1],
    [0., 0., 0., 1.]
])
```

逆运动学结果: [-3.14158398 -1.51099851 -1.42041269 -0.21018135 -3.14158398]

![**目标位姿0仿真结果**](./Robotics_Toolbox_for_Python_(Figure_5).png)

2. 目标位姿1:

```
target_pos1 = np.array([
        [1., 0., 0., 0.1,],
        [0., 1., 0., 0.],
        [0., 0., 1., 0.1],
        [0., 0., 0., 1.]
    ])
```

逆运动学结果: [ 0.22904949 -0.76878751 -0.53954626 -0.52268794 -2.91148846]

![**目标位姿1仿真结果**](./Robotics_Toolbox_for_Python_(Figure_6).png)

3. 目标位姿2:

```python
target_pos2 = np.array([
    [cos(π/3), 0., -sin(π/3), 0.05,],
    [0., 1., 0., 0.03],
    [sin(π/3), 0., cos(π/3), -0.1],
    [0., 0., 0., 1.]
])
```

逆运动学结果: [ 2.30861563  1.06878578 -1.85002128 -0.43842295 -1.35483398]

![**目标位姿2仿真结果**](./Robotics_Toolbox_for_Python_(Figure_7).png)

4. 目标位姿3:

```
target_pos3 = np.array([
        [-0.866, -0.25, -0.433, -0.03704,],
        [0.5, -0.433, -0.75, -0.06415],
        [0., -0.866, 0.5, 0.3073],
        [0., 0., 0., 1.]
    ])
```

逆运动学结果: [-2.09439539 -0.78770632  1.05642585  0.77851567 -1.57080255]

![**目标位姿3仿真结果**](./Robotics_Toolbox_for_Python_(Figure_8).png)

### 4. 工作空间分析

创新点：

1. 采用随机采样代替均匀网格采样，提高采样效率
2. 使用scipy.spatial.ConvexHull计算工作空间边界
3. 采用plotly实现交互式3D可视化

工作空间采样策略：

```python
joint_limits = [
    (-π, π),            # q1: -180° to 180°
    (-π/2, π/2),        # q2: -90° to 90°
    (-5π/6, 5π/6),      # q3: -150° to 150°
    (-100π/180, 100π/180), # q4: -100° to 100°
    (-π, π)             # q5: -180° to 180°
]
```

工作空间统计数据：

工作空间采样点数：10000
工作空间凸包顶点数：332
工作空间体积：0.088823 m³
工作空间表面积：0.973859 m²

工作空间范围：
X轴范围：0.579 m
Y轴范围：0.584 m
Z轴范围：0.503 m

## 实验创新点总结

1. 模型构建方面：
   
   - 采用改进DH参数法提高建模准确性
   - 引入关节限位参数确保安全性
2. 工作空间分析方面：
   
   - 使用随机采样提高采样效率
   - 采用凸包算法分析工作空间边界
   - 实现交互式3D可视化展示
3. 算法实现方面：
   
   - 使用LM算法实现稳定的逆运动学求解
   - 结合多个高级Python库提升计算和可视化效果

## 思考与总结

1. 改进DH参数法相比标准DH参数法在建模方面更直观
2. 随机采样相比均匀采样在工作空间分析中更高效
3. 通过凸包分析可以准确获得工作空间的几何特性
4. 交互式可视化有助于更好地理解机械臂的运动特性

